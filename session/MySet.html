<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Document</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script>

        $(document).ready(function(event) {
         // Impedisce il comportamento predefinito del modulo
            var jsonString = localStorage.getItem("mySet");

            var oggetti = JSON.parse(jsonString);

            // ciclo su tutti gli oggetti e accedi alle loro propriet√†
            for (var i = 0; i < oggetti.length; i++) {
                var oggetto = oggetti[i];
               // getImg(oggetto.set_id);
            }   
            // Invia i dati del modulo a setUtente.php tramite Ajax
            //getImg("79111-1");   
        });

        function getImg(setId){
            $.ajax({
                type: 'POST',
                url: 'MySet.php',
                data: {
                    setId: setId
                },
                success: function(response) {
                // Mostra il popup di successo
                var risposta = response.split(",");
                var nome = risposta[0];
                var imageURL = risposta[1];
                settaImmagine(nome, imageURL);
                
                },
            });
            
        };


            
        function settaImmagine(nome, imageURL) {

            const myRow = document.getElementById("myRow");

            const newImage = document.createElement("img");
            newImage.setAttribute("src", imageUrl);
            newImage.classList.add("img-fluid", "rounded");
            const newName = document.createElement("span");
            newName.textContent = name;
            newName.classList.add("d-block", "text-center");
            const newCol = document.createElement("div");
            newCol.classList.add("col");
            newCol.appendChild(newImage);
            newCol.appendChild(newName);
            myRow.appendChild(newCol);

        }

        
    </script>
</head>
<body>
    <button onclick="settaImmagine('ciao', 'https://images.brickset.com/sets/AdditionalImages/79111-1/tn_79111_alt1_jpg.jpg')"> casdkjsfiosfkjisfuji</button>
    <div class="container">
        <div class="row" id="myRow"></div>
      </div>
</body>
</html>